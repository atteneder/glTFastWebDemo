<!DOCTYPE html>
<html>
<head>
	<title>glTFast Web Demo</title>
	<meta charset="utf-8">
	<link rel="stylesheet" type="text/css" href="style.css">
	
</head>
<body>
<header><h1><a href="https://github.com/atteneder/glTFast">glTFast</a> Web Demo</h1>
<form id="urlform">
	<input id="formUrl" type="text" value="https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/Duck/glTF-Binary/Duck.glb">
	<button id="loadButton" type="button" disabled>Load</button>
</form>
<div id="preload">
Note: wait for Unity player to finish initializing before loading something.
</div>
<div id="postload" style="visibility: hidden;">
Enter a custom URL to a glTF binary (.glb) and press the "Load" button.
</div>
<div class="openNav" onclick="openNav()">&#9776; Open sample file menu</div>
</header>
<div class="frameContainer">
	<a href="https://github.com/atteneder/glTFast" target="_blank">glTFast</a><br />
	<iframe id="glTFast" src="glTFast/index.html"></iframe>
</div>
<aside id="kofi">
<h2>Like it?</h2>
show your appreciation and...<br />
<script type='text/javascript' src='https://ko-fi.com/widgets/widget_2.js'></script><script type='text/javascript'>kofiwidget2.init('Buy Me a Coffee', '#46b798', 'C0C3BW7G');kofiwidget2.draw();</script> 
</aside>
<div id="mySidenav" class="sidenav">
<a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
<h2>Sample files</h2>
<p>source: <a href="https://github.com/KhronosGroup/glTF-Sample-Models" target="_blank">Khronos</a></p>
<ul id="filelist">
</ul>
</div>
<aside id="links">
<h2>Links</h2>

<a class="github-button" href="https://github.com/atteneder/glTFast" aria-label="go to atteneder/glTFast on GitHub">glTFast project on GitHub</a>
<a class="github-button" href="https://github.com/atteneder" aria-label="Follow @atteneder on GitHub">Follow @atteneder</a>

<a href="https://twitter.com/tteneder?ref_src=twsrc%5Etfw" class="twitter-follow-button" data-show-count="false" target="_blank">Follow @tteneder</a>

</aside>
<aside id="notes">
<h2>Update History</h2>
<h3>2022-04-29</h3>
<p>
	<ul>
		<li>Added initial drag'n'drop support for glTF-binary and self-contained glTFs</li>
		<li>Updated glTFast to <a href="https://github.com/atteneder/glTFast/releases/tag/v4.7.0" target="_blank">v4.7.0</a></li>
		<li>Built with Unity 2021.3.1f1</li>
	</ul>
</p>
<h3>2021-10-28</h3>
<p>
	<ul>
		<li>Updated glTFast to <a href="https://github.com/atteneder/glTFast/releases/tag/v4.4.3" target="_blank">v4.4.3</a></li>
		<li>Built with Unity 2021.2.0f1</li>
	</ul>
</p>
<h3>2021-04-13</h3>
<p>
	<ul>
		<li>Updated glTFast to <a href="https://github.com/atteneder/glTFast/releases/tag/v3.2.0" target="_blank">v3.2.0</a></li>
		<li>Built with Unity 2021.1.2f1</li>
	</ul>
</p>
<h3>2021-02-07</h3>
<p>
	<ul>
		<li>Updated glTFast to <a href="https://github.com/atteneder/glTFast/releases/tag/v3.0.2" target="_blank">v3.0.2</a></li>
	</ul>
</p>
<h3>2021-02-05</h3>
<p>
	<ul>
		<li>Updated glTFast to <a href="https://github.com/atteneder/glTFast/releases/tag/v3.0.1" target="_blank">v3.0.1</a></li>
	</ul>
</p>
<h3>2021-02-03</h3>
<p>
	<ul>
		<li>Updated glTFast to <a href="https://github.com/atteneder/glTFast/releases/tag/v3.0.0" target="_blank">v3.0.0</a></li>
		<li>Built with Unity 2021.1.0b5</li>
	</ul>
</p>
<h3>2020-04-28</h3>
<p>
	<ul>
		<li>Updated glTFast to <a href="https://github.com/atteneder/glTFast/releases/tag/v1.0.0" target="_blank">v1.0.0</a></li>
		<li>Built with Unity 2019.3.11f1</li>
	</ul>
</p>
<h3>2020-02-01</h3>
<p>
	<ul>
		<li>Updated glTFast to <a href="https://github.com/atteneder/glTFast/releases/tag/v0.9.0" target="_blank">v0.9.0</a></li>
		<li>Built with Unity 2019.2.19f1</li>
	</ul>
</p>
<h3>2019-12-05</h3>
<p>
	<ul>
		<li>Updated glTFast to <a href="https://github.com/atteneder/glTFast/releases/tag/v0.8.0" target="_blank">v0.8.0</a></li>
		<li>Much more supported sample files in list</li>
		<li>Built with Unity 2019.2.14f1</li>
	</ul>
</p>
<h3>2019-11-15</h3>
<p>
	<ul>
		<li>Updated glTFast to <a href="https://github.com/atteneder/glTFast/releases/tag/v0.6.0" target="_blank">v0.6.0</a></li>
		<li>Extended sample file list (by newly supported glTFs with unlit or specular-glossiness materials)</li>
		<li>Built with Unity 2019.2.10f1</li>
	</ul>
</p>
<h3>2019-09-14</h3>
<p>
	<ul>
		<li>Updated glTFast to <a href="https://github.com/atteneder/glTFast/releases/tag/v0.5.0" target="_blank">v0.5.0</a></li>
		<li>Extended sample file list (by newly supported Draco mesh compressed glTFs)</li>
		<li>Dropped asm.js support (now it's WebAssembly only)</li>
		<li>Built with Unity 2019.2.3f1</li>
	</ul>
</p>
<h3>2019-06-30</h3>
<p>
	<ul>
		<li>Removed comparison with UnityGLTF. Exporting an up-to-date version was too much of work lately.</li>
	</ul>
</p>
<h3>2019-02-22</h3>
<p>
	<ul>
		<li>Updated glTFast to <a href="https://github.com/atteneder/glTFast/releases/tag/v0.2.0" target="_blank">v0.2.0</a></li>
		<li>Added more items to the sample file list and put it in a side menu</li>
		<li>Tried to update UnityGLTF as well, but it threw exceptions :/</li>
	</ul>
</p>
<h3>2018-09-02</h3>
<p>
	<ul>
		<li>Support for meshes with more than 65k vertices.</li>
	</ul>
</p>
<h3>2018-06-20</h3>
<p>
	<ul>
		<li>free up memory when destroying content</li>
	</ul>
</p>
<h3>2018-05-29</h3>
<p>
	<ul>
		<li>added support for interleaved vertex data</li>
	</ul>
</p>
<h3>2018-05-20</h3>
<p>
	<ul>
		<li>fixed metallic roughness texture usage (workaround)</li>
		<li>fixed occlusion texture usage (workaround)</li>
		<li>added support for 3 component vertex colors (rgb without alpha)</li>
		<li>added support for uint16 vertex colors</li>
	</ul>
</p>
<h3>2018-05-12</h3>
<p>
	<ul><li>initial version</li></ul>
</p>
<h2>Notes</h2>
<p>glTFast has a limited feature set lacking things like animation! Check out <a href="https://github.com/atteneder/glTFast">glTFast on GitHub</a> for details</p>
</aside>
<script type="text/javascript">

	function openNav() {
		document.getElementById("mySidenav").style.width = "350px";
	}

	function closeNav() {
		document.getElementById("mySidenav").style.width = "0";
	}

	function loadLinkList(url,url_prefix) {
		var client = new XMLHttpRequest();
		client.open('GET', url);
		client.onreadystatechange = function() {
			var lines = client.responseText.split(/\r?\n/)
			var arrayLength = lines.length;
			var list = document.getElementById("filelist");
			for (var i = 0; i < arrayLength; i++) {
				let line = lines[i];
				if(!line || line.startsWith('#')) {
					continue;
				}
				let list_item = document.createElement("li");
				let link = document.createElement('a');
				let textnode = document.createTextNode(line);
				
				link.title = line;
				link.href = '#';

				link.addEventListener('click', function(){
					closeNav();
					loadGltf(url_prefix+line);
				});

				link.appendChild(textnode);
				list_item.appendChild(link);
				list.appendChild(list_item);
			}
		}
		client.send();
	}

	function init () {
		var globals = {};
		globals.frame1 = document.getElementById("glTFast");
		globals.formUrl = document.getElementById("formUrl");
		globals.readyCount = 1;

		document.getElementById('loadButton').setAttribute("disabled", "disabled"); 

		globals.onReady = function( instance ) {
			console.log('instance '+instance+' is ready');
			window.globals.readyCount--;
			if(window.globals.readyCount===0) {
				console.log('all is ready');
				var button = document.getElementById('loadButton');
				button.disabled = false;
				button.onclick = function() {submitUrl();};
				document.getElementById('preload').style.visibility = 'hidden';
				document.getElementById('postload').style.visibility = 'visible';
			}

			let params = (new URL(document.location)).searchParams;
    		let filename = params.get("file") || undefined;
			if (filename !== undefined)
				loadGltf(filename);
		}

		window.globals = globals;

		loadLinkList('./glTFast/StreamingAssets/glTF.txt','https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/');
	}

	function loadGltf( url ) {
		if(window.globals.readyCount>0) {
			console.log('unity not ready => abort');
			return;
		}
		window.globals.frame1.contentWindow.gameInstance.Module.SendMessage("TestGui","LoadUrl",url);
		window.globals.frame1.contentWindow.onFileSelected();

		window.globals.formUrl.value = url;
	}

	function submitUrl() {
		loadGltf( window.globals.formUrl.value );
	}

	init();

</script>
<script async defer src="https://buttons.github.io/buttons.js"></script>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</body>
</html>